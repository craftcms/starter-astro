---
import { craftClient } from '../lib/craft';
import { GLOBALS_QUERY } from '../queries/globals';
import Logo from './Logo.astro';
import Navigation from './Navigation.vue';

const currentPath = Astro.url.pathname;
const data = await craftClient.query(GLOBALS_QUERY);
const pages = data?.pagesEntries || [];

console.log('Global Pages:', pages); // Debug log
---

<header class="navigation py-6 px-2 bg-slate-50">
  <div class="sm:flex justify-between container items-center mx-auto">
    <div class="logo sm:tw-basis-1/3 font-bold p-1">
      <Logo />
    </div>
    <Navigation 
      pages={pages} 
      currentPath={currentPath}
      client:load
    />
  </div>
</header>
