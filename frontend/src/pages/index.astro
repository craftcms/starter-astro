---
import Layout from '../layouts/Layout.astro';
import Content from '../components/Content.astro';
import { craftClient } from '../lib/craft';
import { HOME_QUERY } from '../queries/home.mjs';

export const prerender = true;

const data = await craftClient.query(HOME_QUERY);
const transformedData = data?.entry || null;

if (!transformedData) {
  return Astro.redirect('/404');
}
---

<Layout>
  <Content pageData={transformedData} />
</Layout>
